# 十年业务开发总结：如何做好高效高质量的价值交付

## 一、 概述
本文基于作者十年业务开发经验，系统性地阐述了如何在软件交付的全过程中保障质量与效率，实现高效高质量的价值交付。文章将交付过程划分为**需求交付前、需求交付中、需求交付后**三个阶段，并针对每个阶段的关键环节提出了具体的方法论和实践建议。

## 二、 需求交付前
此阶段定义为PRD评审完成前，核心是确保对业务需求的理解达成共识。

### 2.1 方案讨论
*   **关键角色**：熟悉全链路的架构师。
*   **核心任务**：在业务方案初步形成时，进行**工作量预估**。
*   **建议做法**：
    *   拆解模块进行客观评估。
    *   若评估不清，可参考类似项目，并预留联调时间。
    *   提前识别并反馈可预知风险。
*   **个人成长**：鼓励开发同学主动学习，扩充知识域，成为团队的“架构师”。

### 2.2 需求评审
*   **核心目标**：避免理解偏差，明确所有逻辑（包括正常与异常）。
*   **高效评审原则**：
    1.  **评审前对齐**：关键逻辑在会前讨论确定，避免评审会变成讨论会。
    2.  **尊重PD角色**：在方案均可行的争执中，优先采纳产品经理的方案。
    3.  **必须有会议纪要**：记录重要结论和待办事项，作为后续依据。
    4.  **关注异常边界**：不仅要评审正常流程，更要考虑各种异常情况（如接口调用失败、状态未知等）。
    5.  **有效沟通**：先理解对方表达的意思，再阐述自己的观点。
    6.  **建设性反馈**：否定他人方案前，应先思考是否有更优方案。
*   **对PRD的要求**：一份好的PRD应结构清晰，包含 **“为什么做”、“目标效果”、“具体怎么做”** 三部分，逻辑描述需严谨完整。

## 三、 需求交付中
此阶段定义为PRD评审通过后至代码发布上线前，涵盖设计、开发、测试全流程。

### 3.1 交互评审
*   **参与方**：UED（主导）、PD、前端。
*   **原则**：
    *   UED应建立并复用设计规范。
    *   在方案争执不下时，听从UED的专业判断。
    *   避免输出多套方案让PD选择，应由UED给出最优解。

### 3.2 技术评审
*   **核心产出**：**统一规范的设计文档**（需包含接口定义、时序图、领域模型、状态机、监控、容灾等）。
*   **重要性**：消除未知恐惧，避免直接编码导致的混乱。
*   **关键设计原则（摘要）**：
    1.  **理解现有逻辑**：不熟悉现有业务和架构前，不急于设计。
    2.  **慎用分布式锁**：优先考虑通过状态机、乐观锁等解决并发问题。
    3.  **一事一地**：同一业务概念应放在同一个领域内，避免分散控制。
    4.  **核心动作单据化**：核心业务动作应有对应的模型和单据承载。
    5.  **数据可追溯**：核心模型的数据变迁应有事件记录，便于追溯。
    6.  **单据职责单一**：避免创建“万能单据”，导致扩展属性泛滥。
    7.  **系统Owner职责**：必须熟悉自己负责系统的每一处细节。
    8.  **架构师需反馈**：在评审中应给出明确的技术判断和原则。
    9.  **重视领域模型与状态机**：这是业务系统的精髓。
    10. **避免冗余多变字段**：如金额、状态等字段不建议跨单据冗余。
    11. **解耦对客表达与系统实现**：前端展示状态可与后端多个状态映射。
    12. **架构引导代码组织**：设计时应考虑代码的存放位置与结构。
    13. **分离在线与离线**：避免批处理任务影响在线服务。
    14. **前端专注交互**：业务逻辑和流程控制应放在后端。
    15. **慎重引入新技术**：核心系统应使用成熟技术，可在非核心链路尝新。
    16. **评估离线数据依赖**：调整数据模型时，需考虑对下游离线任务的影响。
    17. **明确跨团队协作细节**：接口、消息等约定必须在设计阶段详细定义并文档化。

### 3.3 项目计划
*   设计评审后，需明确并同步研发计划给需求方。
*   计划如有变更，必须**及时沟通**，避免信息不对称。

### 3.4 代码编写
*   **核心实践**：
    1.  **需求变更同步**：编码时发现PRD未覆盖的逻辑，必须与PD及项目组沟通确认，并留痕。
    2.  **谨慎重构**：避免冲动重构，应有计划（经评审、有单测、知会测试）。
    3.  **遵循现有风格**：代码风格应与系统现有风格保持一致。
    4.  **添加断言校验**：对金额恒等式、前置状态等做断言式校验，作为兜底逻辑。
    5.  **先业务后存储**：先设计模型和业务逻辑，再写数据存储层代码。
    6.  **保证唯一性约束**：存储单据必须定义唯一性约束字段。
    7.  **善用本地事务**：多单据更新务必开启事务，且事务内避免远程调用。
    8.  **保障幂等与重试**：考虑本地与远程调用的幂等性，以支持最终一致性。
    9.  **隔离批处理任务**：区分环境数据，并支持单条执行能力。
    10. **注意并发更新**：基于查询结果更新时，需考虑值在查询后可能已被修改。
    11. **编写单元测试**：将单测时间纳入计划，这是证明代码正确性、保障未来修改的基础。
    12. **Debug代码**：通过调试验证所有逻辑分支。
    13. **以代码为准**：不确定的逻辑应查代码或线上数据验证，而非猜测。

### 3.5 项目联调
*   **计划与日报**：制定联调计划，并通过日报同步进度、卡点和风险。
*   **顺序**：先完成**内部联调**，再进行跨团队/部门的外部联调。

### 3.6 代码评审
*   **尽早发起**：给评审和修改预留充足时间。
*   **认真对待**：评审者不应“秒过”，需仔细审查，这也是学习与提升影响力的机会。

### 3.7 用例评审
*   **测试用例来源**：
    *   对客用例应基于测试对PRD的**独立理解**编写。
    *   系统交互用例应基于测试对**技术设计**的理解编写。
*   **开发职责**：需确认并补充测试用例，确保覆盖所有代码逻辑。

### 3.8 项目提测
*   **提测后少改代码**：如必须修改，需知会测试及上下游。
*   **全覆盖测试**：所有用例应在所有环境（日常、预发、生产）验证，不把Case留给用户。
*   **沉淀自动化资产**：将手工用例转化为自动化测试，便于回归。
*   **输出质量报告**：测试同学应总结测试过程、问题与经验。
*   **不带问题发布**：即使是历史遗留问题，也应推动解决至终态，不因赶工期而带病上线。

## 四、 需求交付后
此阶段定义为代码发布上线后，关注线上稳定与价值验证。

### 4.1 问题处理
*   **冷静应对**：出现问题先止血，并第一时间同步TL寻求支持。
*   **事后总结**：分析问题根因，思考在哪个前置环节可以避免。
*   **慎用预发环境**：避免在预发环境处理正式用户数据，除非经过全面评估。

### 4.2 异常监控
*   发布后需主动关注核心业务指标、系统RT、慢SQL、错误日志等监控。
*   确保异常能被及时发现，而非依赖用户投诉。

### 4.3 业务效果
*   上线后关注需求是否达到业务预期。
*   从技术视角分析业务效果，培养业务思维，并用数据验证前期方案争论。

### 4.4 自我总结
*   对交付过程进行复盘，采用“**前置法**”思考：当前阶段发现的问题，能否在更早的阶段（如设计阶段发现编码问题）被规避？
*   通过不断总结，将问题收敛在前置环节，提升整体交付质量与效率。

## 五、 总结
软件交付是复杂的系统工程，需保障每个环节的质量与效率。提升交付质量与效率是一个永恒课题，关键在于从实际问题出发，不断完善方法论与实践，不放过任何问题，方能实现高效高质量的价值交付。
